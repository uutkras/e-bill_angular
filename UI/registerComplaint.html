<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register Complaint</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
 body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      background: url('https://group.met.com/media/omvoe0f3/electricity.jpg?anchor=center&mode=crop&width=1920&rnd=133293326643000000&mode=max&upscale=false') no-repeat center center fixed;
      flex-direction: column;
      min-height: 100vh;
      background-color: #f9f9f9;
    }

    header {
      background-color: #f8f9fa;
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .logo {
      font-size: 24px;
      font-weight: bold;
      color: #5cb85c;
    }

    nav {
      display: flex;
      align-items: center;
    }

    nav a {
      margin: 0 15px;
      text-decoration: none;
      color: #333;
      transition: color 0.3s;
    }

    nav a:hover {
      color: #5cb85c;
    }

    .logout {
      margin-left: auto;
      color: #d9534f;
    }


        .complaint-container {
      position: relative;
      background: rgba(255, 255, 255, 0.95);
      padding: 50px;
      overflow: hidden;
      width: 100%;
      max-width: 400px;
      margin: 20px auto;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            color: #444;
            margin-bottom: 20px;
        }

        .tile {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 20px;
            margin: 10px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: none; /* Hide all tiles initially */
        }

        .tile.active {
            display: block; /* Show only the active tile */
        }

        label {
            display: block;
            margin-top: 10px;
            text-align: left;
            font-weight: 600;
        }

        input,
        select,
        textarea {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 14px;
        }

        .btn {
            display: inline-block;
            background: #5cb85c;
            color: white;
            padding: 12px 25px;
            text-decoration: none;
            border-radius: 5px;
            margin: 20px 10px;
            transition: background 0.3s ease;
        }

        .btn:hover {
            background: #4cae4c;
        }

        .error-message {
            color: red;
            margin-top: 5px;
            text-align: left;
        }

    .section {
      padding: 40px;
      background: white;
      margin: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .section h2 {
      text-align: center;
      margin-bottom: 20px;
    }

    .team, .services {
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
    }

    .team-member, .service-item {
      margin: 15px;
      padding: 20px;
      background: #f4f4f4;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      width: 180px;
      text-align: center;
    }

    footer {
      background-color: #f8f9fa;
      padding: 10px;
      text-align: center;
      position: sticky;
      bottom: 0;
      width: 100%;
      box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1);
    }
    </style>
</head>


<body>

<header>
    <div class="logo">WE ENERGY</div>
    <nav>
        <a href="welcome.html">Home</a>
        <a href="viewBill.html">View Bill</a>
        <a href="complaintStatus.html">Complaint Status</a>
        <a href="login.html" class="logout">Logout</a>
    </nav>
</header>
<div class="complaint-container">
    <h1>Register Complaint</h1>

    <div class="tile active" id="tile1">
        <label for="complaintType">Complaint Type</label>
        <select id="complaintType" onchange="updateSubTypes()">
            <option value="">Select Type</option>
            <option value="billing">Billing Related</option>
            <option value="voltage">Voltage Related</option>
            <option value="disruption">Frequent Disruption</option>
            <option value="streetLight">Street Light Related</option>
            <option value="pole">Pole Related</option>
        </select>
        <div class="error-message" id="complaintTypeError"></div>

        <button class="btn" onclick="nextTile(1)">Next</button>
    </div>

    <div class="tile" id="tile2">
        <label for="subType">Sub-Type</label>
        <select id="subType">
            <option value="">Select Sub-Type</option>
        </select>
        <div class="error-message" id="subTypeError"></div>

        <label for="userId">User ID</label>
        <input type="text" id="userId" maxlength="50" required>
        <div class="error-message" id="userIdError"></div>
        <div class="char-limit">Max 50 characters</div>

        <label for="userName">User Name</label>
        <input type="text" id="userName" maxlength="50" required>
        <div class="error-message" id="userNameError"></div>
        <div class="char-limit">Max 50 characters</div>

        <button class="btn" onclick="prevTile(1)">Back</button>
        <button class="btn" onclick="nextTile(2)">Next</button>
    </div>

    <div class="tile" id="tile3">
        <label for="billNumber">Bill Number</label>
        <input type="text" id="billNumber" maxlength="20" required>
        <div class="error-message" id="billNumberError"></div>
        <div class="char-limit">Max 20 characters</div>

        <label for="mobileNumber">Mobile Number</label>
        <input type="tel" id="mobileNumber" required pattern="[0-9]{10}" maxlength="10">
        <div class="error-message" id="mobileNumberError"></div>
        <div class="char-limit">10 digits required</div>

        <label for="address">Address</label>
        <input type="text" id="address" maxlength="100" required>
        <div class="error-message" id="addressError"></div>
        <div class="char-limit">Max 100 characters</div>

        <button class="btn" onclick="prevTile(2)">Back</button>
        <button class="btn" onclick="nextTile(3)">Next</button>
    </div>

    <div class="tile" id="tile4">
        <label for="problemTitle">Problem Title</label>
        <input type="text" id="problemTitle" maxlength="50" required>
        <div class="error-message" id="problemTitleError"></div>
        <div class="char-limit">Max 50 characters</div>

        <label for="problemDescription">Problem Description</label>
        <textarea id="problemDescription" rows="4" maxlength="250" required></textarea>
        <div class="error-message" id="problemDescriptionError"></div>
        <div class="char-limit">Max 250 characters</div>

        <button class="btn" onclick="prevTile(3)">Back</button>
        <button class="btn" onclick="resetForm()">Reset</button>
        <button class="btn" onclick="submitComplaint()">Submit Complaint</button>
    </div>
</div>


</body>

<script>
    function updateSubTypes() {
        const complaintType = document.getElementById('complaintType').value;
        const subTypeSelect = document.getElementById('subType');
        const subTypeTile = document.getElementById('tile2');

        // Clear previous errors and options
        document.getElementById('subTypeError').textContent = '';
        subTypeSelect.innerHTML = '<option value="">Select Sub-Type</option>';

        let subTypes = [];

        switch (complaintType) {
            case 'billing':
                subTypes = ['A billing issue', 'Payment error'];
                break;
            case 'voltage':
                subTypes = ['Voltage fluctuations', 'Low voltage'];
                break;
            case 'disruption':
                subTypes = ['Frequent power cuts', 'Take something by yourself'];
                break;
            case 'streetLight':
                subTypes = ['Streetlight not working', 'Streetlight not switched on'];
                break;
            case 'pole':
                subTypes = ['Pole damage', 'Pole leaning'];
                break;
        }

        // Populate sub-type dropdown
        subTypes.forEach(subType => {
            const option = document.createElement('option');
            option.value = subType;
            option.textContent = subType;
            subTypeSelect.appendChild(option);
        });

        subTypeTile.style.display = complaintType ? 'block' : 'none';
    }

    function validateInputs(step) {
        let isValid = true;
        clearErrors();

        if (step === 1) {
            const complaintType = document.getElementById('complaintType').value;
            if (!complaintType) {
                showError('complaintType', 'Please select a complaint type.');
                isValid = false;
            }
        }

        if (step === 2) {
            const subType = document.getElementById('subType').value;
            if (!subType) {
                showError('subType', 'Please select a sub-type.');
                isValid = false;
            }

            const userId = document.getElementById('userId').value.trim();
            if (!userId) {
                showError('userId', 'User ID is required.');
                isValid = false;
            }

            const userName = document.getElementById('userName').value.trim();
            if (!userName) {
                showError('userName', 'User Name is required.');
                isValid = false;
            }
        }

        if (step === 3) {
            const billNumber = document.getElementById('billNumber').value.trim();
            if (!billNumber) {
                showError('billNumber', 'Bill Number is required.');
                isValid = false;
            }

            const mobileNumber = document.getElementById('mobileNumber').value.trim();
            if (!mobileNumber.match(/^\d{10}$/)) {
                showError('mobileNumber', 'Mobile Number must be 10 digits.');
                isValid = false;
            }

            const address = document.getElementById('address').value.trim();
            if (!address) {
                showError('address', 'Address is required.');
                isValid = false;
            }
        }

        if (step === 4) {
            const problemTitle = document.getElementById('problemTitle').value.trim();
            if (!problemTitle) {
                showError('problemTitle', 'Problem Title is required.');
                isValid = false;
            }

            const problemDescription = document.getElementById('problemDescription').value.trim();
            if (!problemDescription) {
                showError('problemDescription', 'Problem Description is required.');
                isValid = false;
            }
        }

        return isValid;
    }

    function nextTile(currentStep) {
        if (validateInputs(currentStep)) {
            document.getElementById(`tile${currentStep}`).classList.remove('active');
            document.getElementById(`tile${currentStep + 1}`).classList.add('active');
        }
    }

    function prevTile(currentStep) {
        document.getElementById(`tile${currentStep}`).classList.remove('active');
        document.getElementById(`tile${currentStep - 1}`).classList.add('active');
    }

    function resetForm() {
        document.getElementById('complaintType').value = '';
        document.getElementById('subType').innerHTML = '<option value="">Select Sub-Type</option>';
        document.getElementById('userId').value = '';
        document.getElementById('userName').value = '';
        document.getElementById('billNumber').value = '';
        document.getElementById('mobileNumber').value = '';
        document.getElementById('address').value = '';
        document.getElementById('problemTitle').value = '';
        document.getElementById('problemDescription').value = '';
        clearErrors();
        document.getElementById('tile1').classList.add('active');
        for (let i = 2; i <= 4; i++) {
            document.getElementById(`tile${i}`).classList.remove('active');
        }
    }

    function submitComplaint() {
        if (validateInputs(4)) {
            const complaintData = {
                complaintType: document.getElementById('complaintType').value,
                subType: document.getElementById('subType').value,
                userId: document.getElementById('userId').value,
                userName: document.getElementById('userName').value,
                billNumber: document.getElementById('billNumber').value,
                mobileNumber: document.getElementById('mobileNumber').value,
                address: document.getElementById('address').value,
                problemTitle: document.getElementById('problemTitle').value,
                problemDescription: document.getElementById('problemDescription').value,
                status: 'Pending'
            };

            // Save complaint data to local storage
            const complaints = JSON.parse(localStorage.getItem('complaints')) || [];
            complaints.push(complaintData);
            localStorage.setItem('complaints', JSON.stringify(complaints));

            alert('Complaint registered successfully!');
            resetForm(); // Reset the form after submission
        }
    }

    function showError(elementId, message) {
        const errorElement = document.getElementById(`${elementId}Error`);
        errorElement.textContent = message;
    }

    function clearErrors() {
        const errorElements = document.querySelectorAll('.error-message');
        errorElements.forEach(error => error.textContent = '');
    }
</script>
</body>

</html>
